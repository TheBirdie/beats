<?xml version="1.0" encoding="utf-8"?>
<scenario id="0" name="null" schemaVersion="2.0.2">
  
  <settings>
    <units>SI</units>
    <VehicleTypes>
      <vehicle_type name="car" weight="1.0"/>
    </VehicleTypes>
  </settings>

  <InitialDensitySet>
    <density link_id="-1">0.18</density>
    <density link_id="-2">0.04</density>
    <density link_id="1">0.18</density>
    <density link_id="2">0.00</density>
  </InitialDensitySet>

  <DemandProfileSet>
    <demandProfile dt="5" link_id_origin="-1">0.18, 0</demandProfile>
    <demandProfile dt="5" link_id_origin="-2">0.0</demandProfile>
  </DemandProfileSet>

  <ControllerSet>
    <controller dt="5" id="0" name="MPC" type="CRM_MPC" enabled="true">
      <parameters>
        <parameter name="policy" value="adjoint"/>
        <parameter name="dt_optimize" value="25"/>
        <parameter name="opt_timestep" value="5"/>
        <parameter name="opt_horizon" value="25"/>
      </parameters>
      <targetElements>
        <scenarioElement id="-1" type="link"/>
        <scenarioElement id="-2" type="link"/>
      </targetElements>
	  <!--
      <feedbackElements>
        <scenarioElement id="-2" type="link" usage="mainlinelink"/>
      </feedbackElements>
	  -->
    </controller>
  </ControllerSet>

  <FundamentalDiagramProfileSet>

    <fundamentalDiagramProfile link_id="-1">
      <fundamentalDiagram capacity=".2" congestion_speed="1" jam_density="100" free_flow_speed=".2" />
    </fundamentalDiagramProfile>
    
    <fundamentalDiagramProfile link_id="-2">
      <fundamentalDiagram capacity=".2" congestion_speed="1" jam_density="100" free_flow_speed=".2"/>
    </fundamentalDiagramProfile>

    <fundamentalDiagramProfile link_id="1">
      <fundamentalDiagram capacity=".18" congestion_speed="1" jam_density=".36" free_flow_speed="1" />
    </fundamentalDiagramProfile>
    <fundamentalDiagramProfile link_id="2">
      <fundamentalDiagram capacity=".2" congestion_speed="1" jam_density=".4" free_flow_speed="1" />
    </fundamentalDiagramProfile>
  </FundamentalDiagramProfileSet>
  <NetworkList>
    <network dt="5" id="-1" name="New Network">
      <NodeList>
        <node id="-1" type="terminal">
          <outputs>
            <output link_id="-1"/>
          </outputs>
          <inputs>
          </inputs>
        </node>

        <node id="-2" type="terminal">
          <outputs>
            <output link_id="-2"/>
          </outputs>
          <inputs>
          </inputs>
        </node>

        <node id="-3" type="terminal">
          <outputs>
          </outputs>
          <inputs>
            <input link_id="2"/>            
          </inputs>
        </node>

        <node id="1" type="simple">
          <outputs>
            <output link_id="1"/>            
          </outputs>
          <inputs>
            <input link_id="-1"/>            
          </inputs>
        </node>

        <node id="2" type="simple">
          <outputs>
            <output link_id="2"/>            
          </outputs>
          <inputs>
            <input link_id="-2"/>            
            <input link_id="1"/>                        
          </inputs>
        </node>
      </NodeList>
      <LinkList>
        <link id="-1" lanes="1" length="5" type="onramp">
          <begin node_id="-1"/>
          <end node_id="1"/>
          <dynamics type="CTM"/>
        </link>
        <link id="-2" lanes="1" length="5" type="onramp">
          <begin node_id="-2"/>
          <end node_id="2"/>
          <dynamics type="CTM"/>
        </link>

        <link id="1" lanes="1" length="5" type="freeway">
          <begin node_id="1"/>
          <end node_id="2"/>
          <dynamics type="CTM"/>
        </link>

        <link id="2" lanes="1" length="5" type="freeway">
          <begin node_id="2"/>
          <end node_id="-3"/>
          <dynamics type="CTM"/>
        </link>
	  </LinkList>
    </network>
  </NetworkList>
</scenario>
